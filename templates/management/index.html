{% extends 'base.html' %}

{% block title %}Management{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4 mb-0">Management Dashboard</h1>
  <div>
    <a href="{% url 'management_users' %}" class="btn btn-sm btn-primary">Users</a>
    <a href="{% url 'management_stations' %}" class="btn btn-sm btn-secondary">Stations</a>
    <a href="{% url 'management_ingredients' %}" class="btn btn-sm btn-secondary">Ingredients</a>
    <a href="{% url 'management_station_ingredients' %}" class="btn btn-sm btn-outline-dark">Station â†” Ingredients</a>
  </div>
  </div>

<div class="row g-3">
  <div class="col-md-4">
    <div class="card h-100">
      <div class="card-header">Orders Summary</div>
      <div class="card-body">
        <p class="mb-1">Pending: <strong>{{ orders_pending }}</strong></p>
        <p class="mb-0">Completed: <strong>{{ orders_completed }}</strong></p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card h-100">
      <div class="card-header">Users per Location</div>
      <ul class="list-group list-group-flush">
        {% for row in users_by_location %}
          <li class="list-group-item d-flex justify-content-between"><span>{{ row.location|default:'(None)' }}</span><span class="badge text-bg-secondary">{{ row.total }}</span></li>
        {% empty %}
          <li class="list-group-item">No users found.</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card h-100">
      <div class="card-header">Recent Contact Messages</div>
      <ul class="list-group list-group-flush">
        {% for msg in recent_contacts %}
          <li class="list-group-item">
            <div class="small text-muted">{{ msg.created_at }}</div>
            <div class="fw-bold">{{ msg.subject }}</div>
            <div class="text-truncate">From {{ msg.name }} &lt;{{ msg.email }}&gt;</div>
          </li>
        {% empty %}
          <li class="list-group-item">No messages yet.</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}

